# üå§Ô∏è Weather Stations API

**REST API –¥–ª—è —Å–±–æ—Ä–∞, —Ö—Ä–∞–Ω–µ–Ω–∏—è –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –¥–∞–Ω–Ω—ã–º–∏ —Å –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π**

[![Python 3.12](https://img.shields.io/badge/Python-3.12-blue.svg)](https://www.python.org/downloads/)
[![FastAPI](https://img.shields.io/badge/FastAPI-0.104.1-green.svg)](https://fastapi.tiangolo.com/)
[![Peewee](https://img.shields.io/badge/Peewee-3.17.0-yellow.svg)](http://docs.peewee-orm.com/)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

## üìã –û –ø—Ä–æ–µ–∫—Ç–µ

Weather Stations API ‚Äî —ç—Ç–æ –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —Å–µ—Ç—å—é –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π, –≤–∫–ª—é—á–∞—é—â–∞—è:

- üìç **–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è–º–∏** —Å—Ç–∞–Ω—Ü–∏–π —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ (—à–∏—Ä–æ—Ç–∞/–¥–æ–ª–≥–æ—Ç–∞)
- üå°Ô∏è **–†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–π** —Å —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∏–º–∏ —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞–º–∏
- üì° **–ö–æ–Ω—Ç—Ä–æ–ª—å –¥–∞—Ç—á–∏–∫–æ–≤** —Ä–∞–∑–ª–∏—á–Ω—ã—Ö —Ç–∏–ø–æ–≤ (—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –≤–ª–∞–∂–Ω–æ—Å—Ç—å, –¥–∞–≤–ª–µ–Ω–∏–µ –∏ –¥—Ä.)
- üìä **–°–±–æ—Ä –∏ —Ö—Ä–∞–Ω–µ–Ω–∏–µ** –ø–æ–≥–æ–¥–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- ‚ö†Ô∏è **–°–∏—Å—Ç–µ–º—É –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π** –æ –ø–æ–≥–æ–¥–Ω—ã—Ö –∞–Ω–æ–º–∞–ª–∏—è—Ö
- üîÑ **–ü–æ–ª–Ω—ã–π CRUD** –¥–ª—è –≤—Å–µ—Ö —Å—É—â–Ω–æ—Å—Ç–µ–π

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ö–ª–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
```bash
git clone https://github.com/SorokoletovDmitry/weather_station.git
cd weather-stations-api
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
bash
# –°–æ–∑–¥–∞–Ω–∏–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–≥–æ –æ–∫—Ä—É–∂–µ–Ω–∏—è
python -m venv venv

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Windows)
venv\Scripts\activate

# –ê–∫—Ç–∏–≤–∞—Ü–∏—è (Linux/Mac)
source venv/bin/activate
3. –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
bash
pip install -r requirements.txt
4. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö
bash
python models.py
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite –±—É–¥–µ—Ç —Å–æ–∑–¥–∞–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å —Ç–µ—Å—Ç–æ–≤—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

5. –ó–∞–ø—É—Å–∫ —Å–µ—Ä–≤–µ—Ä–∞
bash
uvicorn main:app --reload
6. –î–æ—Å—Ç—É–ø –∫ API
–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è Swagger UI: http://localhost:8000/api/docs

–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: http://localhost:8000/api/redoc

–ë–∞–∑–æ–≤—ã–π URL API: http://localhost:8000

üìÅ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞
text
weather-stations-api/
‚îú‚îÄ‚îÄ main.py              # –û—Å–Ω–æ–≤–Ω–æ–µ FastAPI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
‚îú‚îÄ‚îÄ models.py            # –ú–æ–¥–µ–ª–∏ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (Peewee ORM)
‚îú‚îÄ‚îÄ schemas.py           # Pydantic —Å—Ö–µ–º—ã –¥–ª—è –≤–∞–ª–∏–¥–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ requirements.txt     # –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ Python
‚îú‚îÄ‚îÄ README.md           # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
‚îú‚îÄ‚îÄ weather_stations.db  # –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö SQLite (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
‚îî‚îÄ‚îÄ postman/            # –§–∞–π–ª—ã –¥–ª—è Postman
    ‚îú‚îÄ‚îÄ Weather_Stations_API.postman_collection.json
    ‚îî‚îÄ‚îÄ Weather_Stations_API.postman_environment.json
üóÑÔ∏è –ú–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö
–û—Å–Ω–æ–≤–Ω—ã–µ —Å—É—â–Ω–æ—Å—Ç–∏:
Location - –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏

–ö–æ–æ—Ä–¥–∏–Ω–∞—Ç—ã (—à–∏—Ä–æ—Ç–∞, –¥–æ–ª–≥–æ—Ç–∞, –≤—ã—Å–æ—Ç–∞)

–ê–¥—Ä–µ—Å, –≥–æ—Ä–æ–¥, —Å—Ç—Ä–∞–Ω–∞

–°—Ç–∞—Ç—É—Å –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏

WeatherStation - –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—è

–ö–æ–¥ —Å—Ç–∞–Ω—Ü–∏–∏ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)

–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å, –º–æ–¥–µ–ª—å

–î–∞—Ç–∞ —É—Å—Ç–∞–Ω–æ–≤–∫–∏ –∏ –æ–±—Å–ª—É–∂–∏–≤–∞–Ω–∏—è

SensorType - —Ç–∏–ø –¥–∞—Ç—á–∏–∫–∞

–ù–∞–∑–≤–∞–Ω–∏–µ (–¢–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞, –í–ª–∞–∂–Ω–æ—Å—Ç—å –∏ —Ç.–¥.)

–ï–¥–∏–Ω–∏—Ü—ã –∏–∑–º–µ—Ä–µ–Ω–∏—è (¬∞C, %, hPa)

–î–∏–∞–ø–∞–∑–æ–Ω –¥–æ–ø—É—Å—Ç–∏–º—ã—Ö –∑–Ω–∞—á–µ–Ω–∏–π

Sensor - –∫–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π –¥–∞—Ç—á–∏–∫

–ö–æ–¥ –¥–∞—Ç—á–∏–∫–∞ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π –≤ —Ä–∞–º–∫–∞—Ö —Å—Ç–∞–Ω—Ü–∏–∏)

–î–∞—Ç–∞ –∫–∞–ª–∏–±—Ä–æ–≤–∫–∏, —Ç–æ—á–Ω–æ—Å—Ç—å

–°–≤—è–∑—å —Å–æ —Å—Ç–∞–Ω—Ü–∏–µ–π –∏ —Ç–∏–ø–æ–º –¥–∞—Ç—á–∏–∫–∞

WeatherData - –ø–æ–≥–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

–ó–Ω–∞—á–µ–Ω–∏–µ –∏–∑–º–µ—Ä–µ–Ω–∏—è

–í—Ä–µ–º–µ–Ω–Ω–∞—è –º–µ—Ç–∫–∞

–ö–∞—á–µ—Å—Ç–≤–æ –¥–∞–Ω–Ω—ã—Ö (0-100%)

–°—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON

WeatherAlert - –ø–æ–≥–æ–¥–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

–¢–∏–ø –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è (–®–¢–û–†–ú, –ú–û–†–û–ó –∏ —Ç.–¥.)

–£—Ä–æ–≤–µ–Ω—å —Å–µ—Ä—å–µ–∑–Ω–æ—Å—Ç–∏

–í—Ä–µ–º–µ–Ω–Ω—ã–µ —Ä–∞–º–∫–∏

–ò—Å—Ç–æ—á–Ω–∏–∫ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

üîå API Endpoints
üìç Locations (–ú–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è)
–ú–µ—Ç–æ–¥	–≠–Ω–¥–ø–æ–∏–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ
POST	/locations/	–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤–æ–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
GET	/locations/	–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–π
GET	/locations/{id}	–ü–æ–ª—É—á–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ –ø–æ ID
PUT	/locations/{id}	–û–±–Ω–æ–≤–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
DELETE	/locations/{id}	–£–¥–∞–ª–∏—Ç—å –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏–µ
üå°Ô∏è Weather Stations (–ú–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏–∏)
–ú–µ—Ç–æ–¥	–≠–Ω–¥–ø–æ–∏–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ
POST	/stations/	–°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—É—é –º–µ—Ç–µ–æ—Å—Ç–∞–Ω—Ü–∏—é
GET	/stations/	–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Å—Ç–∞–Ω—Ü–∏–π
GET	/stations/{id}	–ü–æ–ª—É—á–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é —Å –¥–∞—Ç—á–∏–∫–∞–º–∏
PUT	/stations/{id}	–û–±–Ω–æ–≤–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é
DELETE	/stations/{id}	–£–¥–∞–ª–∏—Ç—å —Å—Ç–∞–Ω—Ü–∏—é
üîß Sensor Types (–¢–∏–ø—ã –¥–∞—Ç—á–∏–∫–æ–≤)
–ú–µ—Ç–æ–¥	–≠–Ω–¥–ø–æ–∏–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ
POST	/sensor-types/	–°–æ–∑–¥–∞—Ç—å —Ç–∏–ø –¥–∞—Ç—á–∏–∫–∞
GET	/sensor-types/	–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ —Ç–∏–ø–æ–≤
GET	/sensor-types/{id}	–ü–æ–ª—É—á–∏—Ç—å —Ç–∏–ø –ø–æ ID
PUT	/sensor-types/{id}	–û–±–Ω–æ–≤–∏—Ç—å —Ç–∏–ø –¥–∞—Ç—á–∏–∫–∞
DELETE	/sensor-types/{id}	–£–¥–∞–ª–∏—Ç—å —Ç–∏–ø –¥–∞—Ç—á–∏–∫–∞
üì° Sensors & Data (–î–∞—Ç—á–∏–∫–∏ –∏ –¥–∞–Ω–Ω—ã–µ)
–ú–µ—Ç–æ–¥	–≠–Ω–¥–ø–æ–∏–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ
POST	/sensors/	–°–æ–∑–¥–∞—Ç—å –¥–∞—Ç—á–∏–∫
GET	/sensors/	–ü–æ–ª—É—á–∏—Ç—å —Å–ø–∏—Å–æ–∫ –¥–∞—Ç—á–∏–∫–æ–≤
GET	/sensors/{id}	–ü–æ–ª—É—á–∏—Ç—å –¥–∞—Ç—á–∏–∫ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π
PUT	/sensors/{id}	–û–±–Ω–æ–≤–∏—Ç—å –¥–∞—Ç—á–∏–∫
DELETE	/sensors/{id}	–£–¥–∞–ª–∏—Ç—å –¥–∞—Ç—á–∏–∫
GET	/sensors/{id}/data	–ü–æ–ª—É—á–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞
POST	/weather-data/	–û—Ç–ø—Ä–∞–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –¥–∞—Ç—á–∏–∫–∞
GET	/weather-data/latest	–ü–æ—Å–ª–µ–¥–Ω–∏–µ –¥–∞–Ω–Ω—ã–µ
PUT	/weather-data/{id}	–û–±–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
DELETE	/weather-data/{id}	–£–¥–∞–ª–∏—Ç—å –¥–∞–Ω–Ω—ã–µ
‚ö†Ô∏è Weather Alerts (–ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è)
–ú–µ—Ç–æ–¥	–≠–Ω–¥–ø–æ–∏–Ω—Ç	–û–ø–∏—Å–∞–Ω–∏–µ
POST	/alerts/	–°–æ–∑–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
GET	/alerts/	–ü–æ–ª—É—á–∏—Ç—å –≤—Å–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
GET	/alerts/active	–ê–∫—Ç–∏–≤–Ω—ã–µ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è
GET	/alerts/{id}	–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø–æ ID
PUT	/alerts/{id}	–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
DELETE	/alerts/{id}	–£–¥–∞–ª–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ
üìä –ü—Ä–∏–º–µ—Ä—ã –∑–∞–ø—Ä–æ—Å–æ–≤
–°–æ–∑–¥–∞–Ω–∏–µ –º–µ—Å—Ç–æ–ø–æ–ª–æ–∂–µ–Ω–∏—è
bash
curl -X POST "http://localhost:8000/locations/" \
  -H "Content-Type: application/json" \
  -d '{
    "name": "–ú–æ—Å–∫–≤–∞, —Ü–µ–Ω—Ç—Ä",
    "latitude": 55.7558,
    "longitude": 37.6173,
    "altitude": 156.0,
    "city": "–ú–æ—Å–∫–≤–∞",
    "country": "–†–æ—Å—Å–∏—è",
    "is_active": true
  }'
–û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö —Å –¥–∞—Ç—á–∏–∫–∞
bash
curl -X POST "http://localhost:8000/weather-data/" \
  -H "Content-Type: application/json" \
  -d '{
    "sensor_id": 1,
    "timestamp": "2024-12-20T10:30:00",
    "value": 25.5,
    "quality": 95,
    "raw_data": {
      "battery": 98,
      "signal_strength": 85
    }
  }'
‚öôÔ∏è –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
Backend: FastAPI (Python 3.12)

Database: SQLite —Å Peewee ORM

Validation: Pydantic v2

API Docs: Swagger UI, ReDoc

Testing: Postman –∫–æ–ª–ª–µ–∫—Ü–∏—è

üêõ –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫
–°–µ—Ä–≤–µ—Ä –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è
bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip list | grep -E "fastapi|uvicorn|peewee"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç 8000
netstat -ano | findstr :8000

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ –Ω–∞ –¥—Ä—É–≥–æ–º –ø–æ—Ä—Ç—É
uvicorn main:app --reload --port 8001
–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö
bash
# –£–¥–∞–ª–∏—Ç–µ —Å—Ç–∞—Ä—É—é –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
rm weather_stations.db

# –ü–µ—Ä–µ–∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–π—Ç–µ
python models.py
–û—à–∏–±–∫–∏ –∏–º–ø–æ—Ä—Ç–∞
bash
# –ê–∫—Ç–∏–≤–∏—Ä—É–π—Ç–µ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –æ–∫—Ä—É–∂–µ–Ω–∏–µ
venv\Scripts\activate  # Windows
source venv/bin/activate  # Linux/Mac

# –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
pip install --upgrade -r requirements.txt

